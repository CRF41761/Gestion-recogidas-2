<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gestión de Recogidas</title>
  <link rel="manifest" href="/Gestion-recogidas-2/manifest.json">
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"/>
</head>
<body>

  <h1>Gestión de Recogidas</h1>

  <!-- Botón cerrar -->
  <button id="btnCerrar" aria-label="Cerrar aplicación" title="Cerrar">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </button>

  <!-- FORMULARIO ORIGINAL (INTACTO) -->
  <form id="formulario">

    <!-- Número de entrada -->
    <div class="form-group">
      <label for="numero_entrada">Número de entrada:</label>
      <input type="text" id="numero_entrada" name="numero_entrada" readonly>
    </div>

    <!-- Especie común -->
    <div class="form-group">
      <label for="especie_comun">Especie (nombre común):</label>
      <input list="especies-comun-list" id="especie_comun" name="especie_comun" required>
      <datalist id="especies-comun-list"></datalist>
    </div>

    <!-- Especie científica -->
    <div class="form-group">
      <label for="especie_cientifico">Especie (nombre científico):</label>
      <input list="especies-cientifico-list" id="especie_cientifico" name="especie_cientifico" required>
      <datalist id="especies-cientifico-list"></datalist>
    </div>

    <!-- Cantidad de ejemplares -->
    <div class="form-group">
      <label for="cantidad_animales">Cantidad de ejemplares:</label>
      <input type="number" id="cantidad_animales" name="cantidad_animales" min="1" required>
    </div>

    <!-- Fecha -->
    <div class="form-group">
      <label for="fecha">Fecha:</label>
      <input type="date" id="fecha" name="fecha" required>
    </div>

    <!-- Municipio -->
    <div class="form-group">
      <label for="municipio">Municipio:</label>
      <input list="municipios-list" id="municipio" name="municipio" required>
      <datalist id="municipios-list"></datalist>
    </div>

    <!-- Posible Causa -->
    <fieldset>
      <legend>Posible Causa</legend>
      <div class="checkbox-grid">
        <!-- Primera columna -->
        <div>
          <div><label><input type="checkbox" name="posible_causa" value="Ahogamiento"> Ahogamiento</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Atrapado"> Atrapado</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Atropello"> Atropello</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Cría"> Cría</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Decomiso"> Decomiso</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Depredación"> Depredación</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Desnutrición"> Desnutrición</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Disparo"> Disparo</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Electrocución"> Electrocución</label></div>
        </div>
        <!-- Segunda columna -->
        <div>
          <div><label><input type="checkbox" name="posible_causa" value="Cautividad"> Cautividad</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Hallazgo"> Hallazgo</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Indeterminada"> Indeterminada</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Infecciosa"> Infecciosa</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Intoxicación"> Intoxicación</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Nacido en el Centro"> Nacido en el Centro</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Trampeo"> Trampeo</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Traumatismo"> Traumatismo</label></div>
          <div><label><input type="checkbox" name="posible_causa" value="Otras"> Otras</label></div>
          <div><input type="text" id="otras_texto" name="otras_texto" placeholder="Especificar..."></div>
        </div>
      </div>
    </fieldset>

    <!-- Remitente -->
    <fieldset>
      <legend>Remitente</legend>
      <div class="checkbox-grid">
        <div>
          <div><label><input type="checkbox" name="remitente" value="A. Medioambiental"> A. Medioambiental</label></div>
          <div><label><input type="checkbox" name="remitente" value="Ayuntamiento"> Ayuntamiento</label></div>
          <div><label><input type="checkbox" name="remitente" value="CRF Forn del Vidre"> CRF Forn del Vidre</label></div>
          <div><label><input type="checkbox" name="remitente" value="CRF Santa Faz"> CRF Santa Faz</label></div>
          <div><label><input type="checkbox" name="remitente" value="Cruz Roja"> Cruz Roja</label></div>
        </div>
        <div>
          <div><label><input type="checkbox" name="remitente" value="Guardia Civil"> Guardia Civil</label></div>
          <div><label><input type="checkbox" name="remitente" value="Iberdrola"> Iberdrola</label></div>
          <div><label><input type="checkbox" name="remitente" value="Personal de Conselleria"> Personal de Conselleria</label></div>
          <div><label><input type="checkbox" name="remitente" value="Particular"> Particular</label></div>
          <div><label><input type="checkbox" name="remitente" value="Otras"> Otras</label></div>
          <div><input type="text" id="otras_remitente_texto" name="otras_remitente_texto" placeholder="Especificar..."></div>
        </div>
      </div>
    </fieldset>

    <!-- Estado del Animal -->
    <fieldset>
      <legend>Estado del Animal</legend>
      <div class="checkbox-grid">
        <div>
          <div><label><input type="checkbox" name="estado_animal" value="Animal Vivo"> Animal Vivo</label></div>
          <div><label><input type="checkbox" name="estado_animal" value="Cadáver"> Cadáver</label></div>
        </div>
        <div>
          <div><label><input type="checkbox" name="estado_animal" value="Recoge Centro"> Recoge Centro</label></div>
          <div><label><input type="checkbox" name="estado_animal" value="Recuperación"> Recuperación</label></div>
        </div>
      </div>
    </fieldset>

    <!-- Coordenadas -->
    <div class="form-group" style="display:flex;align-items:center;gap:6px;">
      <label for="coordenadas">Coordenadas:</label>
      <input type="text" id="coordenadas" name="coordenadas" style="flex:1;">
      <button type="button" id="btnLocalizar" style="width:25%;min-width:60px;max-width:110px;padding:6px 4px;font-size:14px;white-space:nowrap;">Localizar</button>
    </div>

    <!-- Mapa -->
    <div id="map" style="height: 300px;"></div>

    <!-- Coordenadas del Mapa -->
    <div class="form-group" style="display:flex;align-items:center;gap:6px;">
      <label for="coordenadas_mapa">Coordenadas del Mapa:</label>
      <input type="text" id="coordenadas_mapa" name="coordenadas_mapa" readonly style="flex:1;">
      <button type="button" id="btnBorrarCoords" style="width:25%;min-width:60px;max-width:110px;padding:6px 4px;font-size:14px;white-space:nowrap;">Borrar</button>
    </div>

    <!-- Apoyo -->
    <div class="form-group">
      <label for="apoyo">Apoyo:</label>
      <input type="text" id="apoyo" name="apoyo">
    </div>

    <!-- CRA y KM -->
    <div class="form-group">
      <label for="cra_km">CRA y KM:</label>
      <input type="text" id="cra_km" name="cra_km">
    </div>

    <!-- Observaciones -->
    <div class="form-group">
      <label for="observaciones">Observaciones:</label>
      <textarea id="observaciones" name="observaciones"></textarea>
    </div>

    <!-- Cumplimentado por -->
    <div class="form-group">
      <label for="cumplimentado_por">Cumplimentado por:</label>
      <input type="text" id="cumplimentado_por" name="cumplimentado_por">
    </div>

    <!-- Teléfono Remitente -->
    <div class="form-group">
      <label for="telefono_remitente">Teléfono Remitente:</label>
      <input type="tel" id="telefono_remitente" name="telefono_remitente">
    </div>

    <!-- Foto -->
    <div class="form-group">
      <label for="foto">Tomar una foto:</label>
      <input type="file" id="foto" name="foto" accept="image/*" capture="environment">
    </div>

    <!-- Botón Enviar -->
    <button type="submit" id="enviarBtn">Enviar</button>

  </form>
  <!-- FIN FORMULARIO ORIGINAL -->

  <!-- SEPARADOR Y BOTONES DE CONSULTA -->
  <div style="margin-top: 40px;"></div>

  <div style="text-align: center; margin-bottom: 20px;">
    <button type="button" id="btnConsultarPDFs">📄 Consultar PDFs</button>
    <button type="button" id="btnConsultarEntrada">🔍 Consultar Entrada</button>
  </div>

  <!-- PANEL CONSULTA PDFs (oculto al principio) -->
  <div id="panelPDFs" style="display:none; margin-top:15px; border:1px solid #ccc; padding:15px;">
    <h3>PDFs guardados</h3>
    <div id="listaPDFs"></div>
    <button type="button" id="btnCerrarPDFs">Cerrar</button>
  </div>

  <!-- PANEL CONSULTA ENTRADA (oculto al principio) -->
  <div id="panelEntrada" style="display:none; margin-top:15px; border:1px solid #ccc; padding:15px;">
    <h3>Consultar Entrada</h3>
    <input type="number" id="inputNumeroEntrada" placeholder="Nº de entrada" min="1">
    <button type="button" id="btnBuscarEntrada">Buscar</button>
    <div id="detalleEntrada" style="margin-top:10px;"></div>
    <button type="button" id="btnCerrarEntrada">Cerrar</button>
  </div>

  <!-- SCRIPTS -->
  <script src="script.js"></script>
</body>
</html>
