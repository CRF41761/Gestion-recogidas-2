<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti贸n de Recogidas</title>
    <link rel="manifest" href="/Gestion-recogidas-2/manifest.json">
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
</head>
<body>
    <h1>Gesti贸n de Recogidas</h1>
    <form id="formulario">
       <!-- N煤mero de entrada -->
<div class="form-group">
    <label for="numero_entrada">N煤mero de entrada:</label>
    <input type="text" id="numero_entrada" name="numero_entrada" readonly>
</div>
     <!-- Campo: Especie com煤n -->
<div class="form-group">
    <label for="especie_comun">Especie (nombre com煤n):</label>
    <input list="especies-comun-list" id="especie_comun" name="especie_comun" required>
    <datalist id="especies-comun-list"></datalist>
</div>

<!-- Campo: Especie cient铆fica -->
<div class="form-group">
    <label for="especie_cientifico">Especie (nombre cient铆fico):</label>
    <input list="especies-cientifico-list" id="especie_cientifico" name="especie_cientifico" required>
    <datalist id="especies-cientifico-list"></datalist>
</div>
<!-- Cantidad de ejemplares -->
<div class="form-group">
    <label for="cantidad_animales">Cantidad de ejemplares:</label>
    <input type="number" id="cantidad_animales" name="cantidad_animales" min="1" required>
</div>

        <!-- Campo: Fecha -->
        <div class="form-group">
            <label for="fecha">Fecha:</label>
            <input type="date" id="fecha" name="fecha" required>
        </div>

        <!-- Campo: Municipio -->
        <div class="form-group">
    <label for="municipio">Municipio:</label>
    <input list="municipios-list" id="municipio" name="municipio" required>
    <datalist id="municipios-list"></datalist>
</div>


       <!-- Campo: Posible Causa -->
<fieldset>
    <legend>Posible Causa</legend>
    <div class="checkbox-grid">
        <!-- Primera columna -->
        <div>
            <div>
                <label for="ahogamiento">Ahogamiento</label>
                <input type="checkbox" id="ahogamiento" name="posible_causa" value="Ahogamiento">
            </div>
            <div>
                <label for="atrapado">Atrapado</label>
                <input type="checkbox" id="atrapado" name="posible_causa" value="Atrapado">
            </div>
            <div>
                <label for="atropello">Atropello</label>
                <input type="checkbox" id="atropello" name="posible_causa" value="Atropello">
            </div>
            <div>
                <label for="cria">Cr铆a</label>
                <input type="checkbox" id="cria" name="posible_causa" value="Cr铆a">
            </div>
            <div>
                <label for="decomiso">Decomiso</label>
                <input type="checkbox" id="decomiso" name="posible_causa" value="Decomiso">
            </div>
            <div>
                <label for="depredacion">Depredaci贸n</label>
                <input type="checkbox" id="depredacion" name="posible_causa" value="Depredaci贸n">
            </div>
            <div>
                <label for="desnutricion">Desnutrici贸n</label>
                <input type="checkbox" id="desnutricion" name="posible_causa" value="Desnutrici贸n">
            </div>
            <div>
                <label for="disparo">Disparo</label>
                <input type="checkbox" id="disparo" name="posible_causa" value="Disparo">
            </div>
            <div>
                <label for="electrocucion">Electrocuci贸n</label>
                <input type="checkbox" id="electrocucion" name="posible_causa" value="Electrocuci贸n">
            </div>
        </div>

        <!-- Segunda columna -->
        <div>
            <div>
                <label for="cautividad">Cautividad</label>
                <input type="checkbox" id="cautividad" name="posible_causa" value="Cautividad">
            </div>
            <div>
                <label for="hallazgo">Hallazgo</label>
                <input type="checkbox" id="hallazgo" name="posible_causa" value="Hallazgo">
            </div>
            <div>
                <label for="indeterminada">Indeterminada</label>
                <input type="checkbox" id="indeterminada" name="posible_causa" value="Indeterminada">
            </div>
            <div>
                <label for="infecciosa">Infecciosa</label>
                <input type="checkbox" id="infecciosa" name="posible_causa" value="Infecciosa">
            </div>
            <div>
                <label for="intoxicacion">Intoxicaci贸n</label>
                <input type="checkbox" id="intoxicacion" name="posible_causa" value="Intoxicaci贸n">
            </div>
            <div>
                <label for="nacido_centro">Nacido en el Centro</label>
                <input type="checkbox" id="nacido_centro" name="posible_causa" value="Nacido en el Centro">
            </div>
            <div>
                <label for="trampeo">Trampeo</label>
                <input type="checkbox" id="trampeo" name="posible_causa" value="Trampeo">
            </div>
            <div>
                <label for="traumatismo">Traumatismo</label>
                <input type="checkbox" id="traumatismo" name="posible_causa" value="Traumatismo">
            </div>
            <div>
                <label for="otras">Otras</label>
                <input type="checkbox" id="otras" name="posible_causa" value="Otras">
            </div>
            <div>
                <input type="text" id="otras_texto" name="otras_texto" placeholder="Especificar...">
            </div>
        </div>
    </div>
</fieldset>

<!-- Campo: Remitente -->
<fieldset>
    <legend>Remitente</legend>
    <div class="checkbox-grid">
        <!-- Primera columna -->
        <div>
            <div>
                <label for="medioambiental">A. Medioambiental</label>
                <input type="checkbox" id="medioambiental" name="remitente" value="A. Medioambiental">
            </div>
            <div>
                <label for="ayuntamiento">Ayuntamiento</label>
                <input type="checkbox" id="ayuntamiento" name="remitente" value="Ayuntamiento">
            </div>
            <div>
                <label for="crf_forn">CRF Forn del Vidre</label>
                <input type="checkbox" id="crf_forn" name="remitente" value="CRF Forn del Vidre">
            </div>
            <div>
                <label for="crf_santa_faz">CRF Santa Faz</label>
                <input type="checkbox" id="crf_santa_faz" name="remitente" value="CRF Santa Faz">
            </div>
            <div>
                <label for="cruz_roja">Cruz Roja</label>
                <input type="checkbox" id="cruz_roja" name="remitente" value="Cruz Roja">
            </div>
        </div>

        <!-- Segunda columna -->
        <div>
            <div>
                <label for="guardia_civil">Guardia Civil</label>
                <input type="checkbox" id="guardia_civil" name="remitente" value="Guardia Civil">
            </div>
            <div>
                <label for="iberdrola">Iberdrola</label>
                <input type="checkbox" id="iberdrola" name="remitente" value="Iberdrola">
            </div>
            <div>
                <label for="personal_conselleria">Personal de Conselleria</label>
                <input type="checkbox" id="personal_conselleria" name="remitente" value="Personal de Conselleria">
            </div>
            <div>
                <label for="particular">Particular</label>
                <input type="checkbox" id="particular" name="remitente" value="Particular">
            </div>
            <div>
                <label for="otras_remitente">Otras</label>
                <input type="checkbox" id="otras_remitente" name="remitente" value="Otras">
            </div>
            <div>
                <input type="text" id="otras_remitente_texto" name="otras_remitente_texto" placeholder="Especificar...">
            </div>
        </div>
    </div>
</fieldset>

<!-- Campo: Estado del Animal -->
<fieldset>
    <legend>Estado del Animal</legend>
    <div class="checkbox-grid">
        <!-- Primera columna -->
        <div>
            <div>
                <label for="animal_vivo">Animal Vivo</label>
                <input type="checkbox" id="animal_vivo" name="estado_animal" value="Animal Vivo">
            </div>
            <div>
                <label for="cadaver">Cad谩ver</label>
                <input type="checkbox" id="cadaver" name="estado_animal" value="Cad谩ver">
            </div>
        </div>

        <!-- Segunda columna -->
        <div>
            <div>
                <label for="recoge_centro">Recoge Centro</label>
                <input type="checkbox" id="recoge_centro" name="estado_animal" value="Recoge Centro">
            </div>
            <div>
                <label for="recuperacion">Recuperaci贸n</label>
                <input type="checkbox" id="recuperacion" name="estado_animal" value="Recuperaci贸n">
            </div>
        </div>
    </div>
</fieldset>


        <!-- Campos adicionales -->
        <div class="form-group">
            <label for="coordenadas">Coordenadas:</label>
            <input type="text" id="coordenadas" name="coordenadas">
        </div>

        <!-- Mapa -->
        <div id="map" style="height: 300px;"></div>

        <!-- Campo: Coordenadas del Mapa -->
        <div class="form-group">
            <label for="coordenadas_mapa">Coordenadas del Mapa:</label>
            <input type="text" id="coordenadas_mapa" name="coordenadas_mapa" readonly>
        </div>

        <!-- Campo: Apoyo -->
        <div class="form-group">
            <label for="apoyo">Apoyo:</label>
            <input type="text" id="apoyo" name="apoyo">
        </div>

        <!-- Campo: CRA y KM -->
        <div class="form-group">
            <label for="cra_km">CRA y KM:</label>
            <input type="text" id="cra_km" name="cra_km">
        </div>

        <!-- Campo: Observaciones -->
        <div class="form-group">
            <label for="observaciones">Observaciones:</label>
            <textarea id="observaciones" name="observaciones"></textarea>
            <button type="button" id="vozObservacionesBtn" title="Dictar por voz"> Dictar</button>
        </div>

        <!-- Campo: Cumplimentado por -->
        <div class="form-group">
            <label for="cumplimentado_por">Cumplimentado por:</label>
            <input type="text" id="cumplimentado_por" name="cumplimentado_por">
        </div>

        <!-- Campo: Tel茅fono Remitente -->
        <div class="form-group">
            <label for="telefono_remitente">Tel茅fono Remitente:</label>
            <input type="tel" id="telefono_remitente" name="telefono_remitente">
        </div>

        <!-- Campo para tomar una foto -->
        <div class="form-group">
            <label for="foto">Tomar una foto:</label>
            <input type="file" id="foto" name="foto" accept="image/*" capture="environment">
        </div>

        <!-- Bot贸n de Env铆o -->
        <button type="submit" id="enviarBtn">Enviar</button>
    </form>
    <script src="script.js"></script>
    <script>
    // --- Dictado por voz en Observaciones ---
    document.addEventListener("DOMContentLoaded", function() {
        var btn = document.getElementById('vozObservacionesBtn');
        var textarea = document.getElementById('observaciones');
        if (btn && textarea) {
            btn.addEventListener('click', function() {
                if ('webkitSpeechRecognition' in window) {
                    var recognition = new webkitSpeechRecognition();
                    recognition.lang = 'es-ES';
                    recognition.interimResults = false;
                    recognition.maxAlternatives = 1;
                    recognition.onresult = function(event) {
                        // A帽ade el texto dictado al final de lo que ya haya
                        textarea.value += (textarea.value ? '\n' : '') + event.results[0][0].transcript;
                    };
                    recognition.onerror = function(event) {
                        alert("Error al dictar: " + event.error);
                    };
                    recognition.start();
                } else {
                    alert("Este navegador no soporta dictado por voz.");
                }
            });
        }
    });
    </script>
</body>
</html>
